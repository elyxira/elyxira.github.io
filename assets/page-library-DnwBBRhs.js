import{d as ue,l as V,c as f,b as m,e as t,E as Ve,t as Q,n as L,y as z,r as u,k as Lt,o as Ee,m as ye,p as he,F as be,z as Qe,f as S,D as A,q as Y,v as ie,s as d,G as Mt,u as St,g as xt,C as x,w as le,H as Ot,A as Nt,I as He}from"./index-7Moa3qG2.js";import{_ as It}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{c as s,_ as Pe,p as We,Q as H,a as p,b as R,d as Tt,e as Dt}from"./modal-settings.vue_vue_type_script_setup_true_lang-D7Fu8hN4.js";const Rt=["width","height"],E=ue({__name:"icon",props:{name:{},size:{default:24}},setup(j){const N=j,w={home:"home",dark_mode:"dark_mode",github:"code",refresh:"refresh",search:"search",more:"more_vert",rename:"edit",delete:"delete",upload:"upload",stats:"bar_chart",start:"play_arrow",settings:"settings",download:"download",warning:"warning"},I=V(()=>w[N.name]||N.name);return($,c)=>N.name==="github"?(m(),f("svg",{key:0,viewBox:"0 0 24 24",width:$.size,height:$.size,style:{display:"inline-block",verticalAlign:"middle"}},c[0]||(c[0]=[t("path",{fill:"currentColor",d:"M12 2C6.477 2 2 6.477 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0012 2z"},null,-1)]),8,Rt)):(m(),f("i",{key:1,class:"material-icons",style:Ve({fontSize:`${$.size}px`,lineHeight:1,verticalAlign:"middle"})},Q(I.value),5))}}),At=ue({__name:"button-settings",props:{class:{}},emits:["open-general-settings"],setup(j,{emit:N}){const w=j,I=V(()=>w.class||""),$=N;function c(){$("open-general-settings")}return(k,y)=>(m(),f("button",{class:L(["settings-button",I.value]),title:"é€šç”¨è®¾ç½®",onClick:c},[z(E,{name:"settings",size:"16"})],2))}}),jt=It(At,[["__scopeId","data-v-13b5feaf"]]),Ut={class:"modal__debug-info"},Ft={class:"modal__debug-item"},Bt={class:"modal__debug-value"},Gt={class:"modal__debug-item"},Ht={class:"modal__debug-value"},Vt={key:0,class:"modal__debug-empty"},Pt={class:"modal__debug-label"},Wt={class:"modal__debug-value"},Jt=ue({__name:"modal-debug",props:{show:{type:Boolean,default:!1}},emits:["close"],setup(j){const N=j,w=u(""),I=u(0),$=u([]);Lt(()=>N.show,C=>{C&&c()},{immediate:!0}),Ee(()=>{w.value=navigator.userAgent,c()});function c(){const{totalSize:C,items:_}=s.getCacheStats();I.value=C,$.value=_}function k(C){if(C===0)return"0 B";const _=1024,M=["B","KB","MB","GB"],g=Math.floor(Math.log(C)/Math.log(_));return parseFloat((C/Math.pow(_,g)).toFixed(2))+" "+M[g]}function y(){confirm("ç¡®å®šè¦æ¸…é™¤æ‰€æœ‰é¢˜åº“ç¼“å­˜å—ï¼Ÿè¿™å°†åˆ é™¤æ‰€æœ‰æœ¬åœ°ä¿å­˜çš„é¢˜åº“æ•°æ®ã€‚")&&s.clearQuizCache()&&c()}return(C,_)=>(m(),ye(Pe,{title:"è°ƒè¯•",show:j.show,onClose:_[1]||(_[1]=M=>C.$emit("close"))},{footer:he(()=>[t("button",{class:"modal__button modal__button--danger",onClick:y},"æ¸…é™¤ç¼“å­˜"),t("button",{class:"modal__button modal__button--secondary",onClick:_[0]||(_[0]=M=>C.$emit("close"))},"å…³é—­")]),default:he(()=>[t("div",Ut,[_[5]||(_[5]=t("h3",null,"ç³»ç»Ÿä¿¡æ¯",-1)),t("div",Ft,[_[2]||(_[2]=t("span",{class:"modal__debug-label"},"æµè§ˆå™¨",-1)),t("span",Bt,Q(w.value),1)]),t("div",Gt,[_[3]||(_[3]=t("span",{class:"modal__debug-label"},"æœ¬åœ°å­˜å‚¨ä½¿ç”¨",-1)),t("span",Ht,Q(k(I.value)),1)]),_[6]||(_[6]=t("h3",null,"é¢˜åº“ç¼“å­˜",-1)),$.value.length===0?(m(),f("div",Vt,_[4]||(_[4]=[t("span",null,"æš‚æ— ç¼“å­˜æ•°æ®",-1)]))):(m(!0),f(be,{key:1},Qe($.value,(M,g)=>(m(),f("div",{class:"modal__debug-item",key:g},[t("span",Pt,Q(M.key),1),t("span",Wt,Q(k(M.size)),1)]))),128))])]),_:1},8,["show"]))}}),Kt={class:"modal__tabs"},Yt={class:"modal__tab-headers"},qt={class:"modal__tab-content"},Xt={key:0,class:"modal__tab-panel modal__tab-panel--active"},Zt={class:"modal__import-options"},ea={class:"modal__import-option"},ta={class:"modal__file-input-wrapper"},aa={for:"quizFileInput",class:"modal__file-input-label"},oa={class:"modal__import-option"},la={class:"modal__url-import"},sa=["disabled"],na={key:1,class:"modal__tab-panel modal__tab-panel--active"},ra={class:"modal__export-options"},ia={key:0,class:"modal__export-option"},ua={key:1,class:"modal__export-option"},da={class:"modal__export-option"},ca=ue({__name:"modal-library-data",props:{quizData:{},show:{type:Boolean}},emits:["close","import-complete"],setup(j,{emit:N}){const w=j,I=N,$=u("import"),c=u(""),k=u(!1);function y(h){var U;const l=h.target,b=(U=l==null?void 0:l.files)==null?void 0:U[0];b&&_(b,l)}function C(){!c.value||k.value||(k.value=!0,d("æ­£åœ¨ä»ŽURLåŠ è½½é¢˜åº“...","info"),fetch(c.value).then(h=>{if(!h.ok)throw new Error(`HTTPé”™è¯¯ï¼š${h.status}`);return h.text()}).then(h=>{M(h,c.value)}).catch(h=>{d(`URLå¯¼å…¥å¤±è´¥: ${h.message}`,"error")}).finally(()=>{k.value=!1}))}function _(h,l){k.value=!0,d("æ­£åœ¨è§£æžé¢˜åº“æ–‡ä»¶...","info");const b=new FileReader;b.onload=U=>{var W;try{const q=(W=U.target)==null?void 0:W.result;M(q,h.name)}catch(q){d(`è§£æžé¢˜åº“æ–‡ä»¶å¤±è´¥: ${q.message}`,"error")}finally{k.value=!1,l&&(l.value="")}},b.onerror=()=>{d("è¯»å–æ–‡ä»¶å¤±è´¥","error"),k.value=!1},b.readAsText(h)}function M(h,l){try{const b=We(h,l);if(s.enhancedValidQuizData(b))d(`æˆåŠŸè§£æžé¢˜åº“ï¼š${l}`,"success"),I("import-complete",b);else throw new Error("é¢˜åº“æ ¼å¼æ— æ•ˆ")}catch(b){d(`è§£æžé¢˜åº“å¤±è´¥: ${b.message}`,"error")}finally{k.value=!1}}function g(){if(!w.quizData){d("æ²¡æœ‰å¯å¯¼å‡ºçš„é¢˜åº“","error");return}const h=JSON.stringify(w.quizData,null,2),l=`data:application/json;charset=utf-8,${encodeURIComponent(h)}`,b=`${w.quizData.title||"quiz"}_${new Date().toISOString().split("T")[0]}.json`;se(l,b),d("é¢˜åº“å¯¼å‡ºæˆåŠŸ","success")}function P(){d("å¤šé¢˜åº“å¯¼å‡ºåŠŸèƒ½å°šæœªå®žçŽ°","warning")}function se(h,l){const b=document.createElement("a");b.setAttribute("href",h),b.setAttribute("download",l),b.click()}return(h,l)=>(m(),ye(Pe,{title:"é¢˜åº“æ•°æ®ç®¡ç†",show:h.show,onClose:l[4]||(l[4]=b=>h.$emit("close"))},{footer:he(()=>[t("button",{class:"modal__button modal__button--secondary",onClick:l[3]||(l[3]=b=>h.$emit("close"))},"å…³é—­")]),default:he(()=>[t("div",Kt,[t("div",Yt,[t("button",{class:L(["modal__tab-header",{"modal__tab-header--active":$.value==="import"}]),onClick:l[0]||(l[0]=b=>$.value="import")}," å¯¼å…¥é¢˜åº“ ",2),t("button",{class:L(["modal__tab-header",{"modal__tab-header--active":$.value==="export"}]),onClick:l[1]||(l[1]=b=>$.value="export")}," å¯¼å‡ºé¢˜åº“ ",2)]),t("div",qt,[$.value==="import"?(m(),f("div",Xt,[t("div",Zt,[t("div",ea,[l[6]||(l[6]=t("h3",null,"æœ¬åœ°æ–‡ä»¶å¯¼å…¥",-1)),l[7]||(l[7]=t("p",null,"æ”¯æŒ JSON å’Œ TXT æ ¼å¼çš„é¢˜åº“æ–‡ä»¶",-1)),t("div",ta,[t("input",{type:"file",id:"quizFileInput",accept:".json,.txt",onChange:y},null,32),t("label",aa,[z(E,{name:"upload",size:"16"}),l[5]||(l[5]=A(" é€‰æ‹©æ–‡ä»¶ "))])])]),t("div",oa,[l[8]||(l[8]=t("h3",null,"URLå¯¼å…¥",-1)),l[9]||(l[9]=t("p",null,"è¾“å…¥é¢˜åº“æ–‡ä»¶çš„URLåœ°å€",-1)),t("div",la,[Y(t("input",{type:"text","onUpdate:modelValue":l[2]||(l[2]=b=>c.value=b),placeholder:"https://example.com/quiz.json"},null,512),[[ie,c.value]]),t("button",{onClick:C,disabled:!c.value||k.value},"å¯¼å…¥",8,sa)])])])])):S("",!0),$.value==="export"?(m(),f("div",na,[t("div",ra,[h.quizData?(m(),f("div",ia,[l[11]||(l[11]=t("h3",null,"å¯¼å‡ºå½“å‰é¢˜åº“",-1)),l[12]||(l[12]=t("p",null,"å°†å½“å‰åŠ è½½çš„é¢˜åº“å¯¼å‡ºä¸ºJSONæ–‡ä»¶",-1)),t("button",{onClick:g,class:"modal__export-button"},[z(E,{name:"download",size:"16"}),l[10]||(l[10]=A(" å¯¼å‡ºé¢˜åº“ "))])])):(m(),f("div",ua,l[13]||(l[13]=[t("h3",null,"æœªåŠ è½½é¢˜åº“",-1),t("p",null,"è¯·å…ˆåŠ è½½ä¸€ä¸ªé¢˜åº“æ‰èƒ½å¯¼å‡º",-1)]))),t("div",da,[l[15]||(l[15]=t("h3",null,"å¯¼å‡ºæ‰€æœ‰æœ¬åœ°é¢˜åº“",-1)),l[16]||(l[16]=t("p",null,"å°†æ‰€æœ‰æœ¬åœ°ç¼“å­˜çš„é¢˜åº“å¯¼å‡ºä¸ºZIPæ–‡ä»¶",-1)),t("button",{onClick:P,class:"modal__export-button"},[z(E,{name:"download",size:"16"}),l[14]||(l[14]=A(" å¯¼å‡ºæ‰€æœ‰é¢˜åº“ "))])])])])):S("",!0)])])]),_:1},8,["show"]))}}),va={class:"page-library"},pa={class:"page-library__content"},ma={class:"page-library__header"},ga={class:"page-library__actions"},fa={class:"page-library__card"},_a={class:"page-library__card-header"},ba={class:"page-library__card-menu"},ya={class:"page-library__filters"},ha={class:"page-library__filter-group"},wa={class:"page-library__search"},$a={class:"page-library__table-container"},Ca={class:"page-library__table"},za={key:0,class:"page-library__loading-overlay"},ka={colspan:"5"},Ea={class:"page-library__loading-content"},Qa={class:"page-library__loading-spinner"},La={class:"page-library__table-title"},Ma={class:"page-library__table-desc"},Sa={class:"page-library__table-actions"},xa=["onClick"],Oa=["onClick"],Na={key:0},Ia={colspan:"5"},Ta={class:"page-library__empty"},Da={class:"page-library__modal"},Ra={class:"page-library__modal-header"},Aa={class:"page-library__modal-body"},ja={class:"form-group"},Ua={class:"page-library__modal-footer"},Fa={class:"page-library__card"},Ba={class:"page-library__card-body"},Ga={key:0,class:"page-library__quiz-info"},Ha={class:"page-library__quiz-info-header"},Va={class:"page-library__quiz-title"},Pa={class:"page-library__quiz-desc"},Wa={key:1,class:"page-library__empty"},Ja={class:"page-library__settings-row"},Ka={class:"page-library__filter-group"},Ya=["disabled"],qa=["value"],Xa=["disabled"],Za=["disabled"],eo={class:"page-library__card-body page-library__stats-container"},to={key:0,class:"page-library__stats-loading"},ao={class:"page-library__loading-spinner"},oo={class:"page-library__stat-card"},lo={class:"page-library__stat-info"},so={class:"page-library__stat-value"},no={class:"page-library__stat-card"},ro={class:"page-library__stat-info"},io={class:"page-library__stat-value"},uo={class:"page-library__stat-card"},co={class:"page-library__stat-info"},vo={class:"page-library__stat-value"},po={class:"page-library__stat-card"},mo={class:"page-library__stat-info"},go={class:"page-library__stat-value"},fo={class:"page-library__stat-card"},_o={class:"page-library__stat-info"},bo={class:"page-library__stat-value"},yo={class:"page-library__modal"},ho={class:"page-library__modal-header"},wo={class:"page-library__modal-body"},$o={class:"mode-options"},Co={class:"page-library__modal-footer"},zo={key:0,class:"page-library__modal"},ko={class:"page-library__modal-header"},Eo={class:"page-library__modal-body"},Qo={class:"error-details"},Lo={class:"page-library__modal-footer"},Mo={class:"page-library__modal"},So={class:"page-library__modal-header"},xo={class:"page-library__modal-body"},Oo={class:"delete-confirm-message"},No={key:0,class:"delete-confirm-warning"},Io={class:"page-library__modal-footer"},To=["disabled"],Do={key:0},Ro={key:1},Fo=ue({__name:"page-library",setup(j){Ee(()=>{if(!document.getElementById("material-icons-css")){const a=document.createElement("link");a.id="material-icons-css",a.rel="stylesheet",a.href="https://fonts.googleapis.com/icon?family=Material+Icons",document.head.appendChild(a)}Mt()});const N=St(),w=u([]),I=u([]),$=u([]),c=u(null),k=u("all"),y=u(H.NORMAL),C=u(1),_=u(50),M=u(!1),g=u({name:"",source:""}),P=u(!1),se=u(0),h=u(0),l=u(null),b=u(null),U=u(null),W=u(!1),q=u(!1),ne=u(!1),re=u(!1),de=u(!1),Z=u(!1),ee=u(!1),O=u(""),v=u(null),te=u(s.getUiSettings().darkMode),Je=V(()=>{var a,e;return(e=(a=l.value)==null?void 0:a.data)!=null&&e.chapters?l.value.data.chapters.reduce((o,n)=>{var r;return o+(((r=n.questions)==null?void 0:r.length)||0)},0):c.value&&c.value.chapters?c.value.chapters.reduce((o,n)=>{var r;return o+(((r=n.questions)==null?void 0:r.length)||0)},0):0}),Le=V(()=>{var a,e;return(e=(a=l.value)==null?void 0:a.data)!=null&&e.chapters?l.value.data.chapters.map(o=>o.title):c.value&&c.value.chapters?c.value.chapters.map(o=>o.title):[]}),ce=u(0),ve=u(0),Ke=u({totalAnswered:0,correctCount:0,wrongCount:0,dailyActivity:[]}),Ye=V(()=>{const a=ce.value;return a===0?"0%":Math.round(ve.value/a*100)+"%"}),qe=V(()=>{const a=s.getGithubConfig();return!!(a!=null&&a.repo&&(a!=null&&a.token))});Ee(async()=>{M.value=!0,T.value=!0;const a=s.getUiSettings();if(te.value=a.darkMode,te.value){const e=document.querySelector(".page-library__theme-toggle");e&&e.classList.add("dark")}try{await J(),ht(),Xe()}catch{d("åˆå§‹åŒ–é¢˜åº“é¡µé¢å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•","error")}finally{T.value=!1,M.value=!1}});function Xe(){const a=s.getLastLoadedQuiz(),e=s.getQuizData();if(e&&a)try{c.value=e,g.value=a;const o=s.getQuizConfig();k.value=o.chapterIndex,y.value=o.mode,C.value=o.rangeStart,_.value=o.rangeEnd||we();const n=Ne().find(r=>r.name===a.name&&r.source===a.source);n&&c.value?(l.value={...n,data:c.value},U.value=l.value):n&&(l.value=n,U.value=n),d("å·²æ¢å¤ä¸Šæ¬¡çš„é¢˜åº“æ•°æ®","success")}catch(o){console.error("è§£æžä¿å­˜çš„é¢˜åº“æ•°æ®å¤±è´¥:",o),s.clearCurrentQuiz()}}const T=u(!1);async function J(){T.value=!0;try{await Ze(),et().catch(a=>{console.warn("åŠ è½½åœ¨çº¿é¢˜åº“åˆ—è¡¨å¤±è´¥:",a),d("éƒ¨åˆ†åœ¨çº¿é¢˜åº“åŠ è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿žæŽ¥","warning")}),qe.value&&tt().catch(a=>{console.warn("åŠ è½½è¿œç¨‹GitHubé¢˜åº“åˆ—è¡¨å¤±è´¥:",a),d("GitHubä»“åº“åŒæ­¥å¤±è´¥ï¼Œä½†ä¸å½±å“å…¶ä»–åŠŸèƒ½","warning")}),d("é¢˜åº“åˆ—è¡¨åˆ·æ–°æˆåŠŸ","success")}catch(a){console.error("åŠ è½½é¢˜åº“åˆ—è¡¨å¤±è´¥:",a),d("åŠ è½½é¢˜åº“åˆ—è¡¨å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿žæŽ¥","error")}finally{T.value=!1}}async function Ze(){try{w.value=s.loadQuizList()}catch{d("åŠ è½½ç¼“å­˜é¢˜åº“åˆ—è¡¨å¤±è´¥","warning"),w.value=[]}}async function et(){try{const e=await fetch("/data/index.json",{headers:{Accept:"application/json"}});if(!e.ok)throw new Error(`æ— æ³•åŠ è½½é¢˜åº“ç´¢å¼•æ–‡ä»¶ (${e.status}): è¯·ç¡®è®¤public/data/index.jsonæ–‡ä»¶å­˜åœ¨ä¸”æ ¼å¼æ­£ç¡®`);let o;try{o=await e.json()}catch{throw new Error("é¢˜åº“ç´¢å¼•æ ¼å¼é”™è¯¯: è¯·ç¡®è®¤index.jsonæ˜¯æœ‰æ•ˆçš„JSONæ–‡ä»¶")}if(Array.isArray(o))I.value=o.map(n=>{let r=n.download_url,i=n.path||`${n.name}.json`;return r||(!i.startsWith("/")&&!i.startsWith("http")&&(i=`/data/${i}`),r=i),{...n,path:i,source:p.ONLINE,download_url:r}});else throw new Error("é¢˜åº“ç´¢å¼•æ ¼å¼æ— æ•ˆ: åº”ä¸ºé¢˜åº“æ•°ç»„")}catch(a){d(`åŠ è½½åœ¨çº¿é¢˜åº“åˆ—è¡¨å¤±è´¥: ${a.message}`,"error"),I.value=[]}}async function tt(){try{const a=s.getGithubConfig();if(!(a!=null&&a.repo)||!(a!=null&&a.token)){d("GitHub é…ç½®ä¸å®Œæ•´","error");return}const e=a.path||"quizzes",o=`https://api.github.com/repos/${a.owner}/${a.repo}/contents/${e}`,n=await fetch(`${o}?ref=${a.branch}`,{headers:{Authorization:`token ${a.token}`,Accept:"application/vnd.github.v3+json"}});if(!n.ok)throw new Error(`èŽ·å–è¿œç¨‹é¢˜åº“åˆ—è¡¨å¤±è´¥ (${n.status}): ${await n.text()}`);const r=await n.json();if(!Array.isArray(r))throw new Error("èŽ·å–çš„è¿œç¨‹é¢˜åº“åˆ—è¡¨æ ¼å¼æ— æ•ˆ");$.value=r.filter(i=>i.type==="file"&&(i.name.endsWith(".json")||i.name.endsWith(".txt"))).map(i=>({id:`remote-${i.path}`,source:p.REMOTE,name:i.name.replace(/\.(json|txt)$/,""),info:`GitHub: ${a.repo}/${e}`,path:i.path,title:i.name.replace(/\.(json|txt)$/,""),lastModified:Date.now(),download_url:i.download_url})),$.value.length>0?d(`å·²åŠ è½½ ${$.value.length} ä¸ªè¿œç¨‹é¢˜åº“`,"success"):d(`è¿œç¨‹ä»“åº“ ${e} ä¸­æœªæ‰¾åˆ°é¢˜åº“æ–‡ä»¶`,"warning")}catch(a){console.error("åŠ è½½è¿œç¨‹é¢˜åº“å¤±è´¥:",a),d(`åŠ è½½è¿œç¨‹é¢˜åº“å¤±è´¥: ${a.message}`,"error"),$.value=[]}}function Me(){c.value&&(s.setQuizData(c.value),s.saveLastLoadedQuiz(g.value.name,g.value.source),s.setQuizConfig({chapterIndex:k.value,mode:y.value,rangeStart:parseInt(C.value.toString()),rangeEnd:parseInt(_.value.toString()),randomize:y.value==="random",wrongOnly:y.value==="wrong"}),s.saveQuizState())}const at=async()=>{if(!c.value){d("è¯·å…ˆé€‰æ‹©ä¸€ä¸ªé¢˜åº“","error");return}s.setQuizConfig({chapterIndex:k.value,mode:y.value==="wrong"?H.REVIEW:y.value,rangeStart:parseInt(C.value.toString()),rangeEnd:parseInt(_.value.toString()),randomize:y.value==="random",wrongOnly:y.value==="wrong"}),s.saveQuizState(),N.push("/quiz")};function ot(a,e,o){if(e!==p.ONLINE){if(a.preventDefault(),a.stopPropagation(),document.removeEventListener("click",F),document.removeEventListener("contextmenu",F),P.value&&v.value&&v.value.quiz&&o.name===v.value.quiz.name&&o.source===v.value.quiz.source){F();return}P.value?(F(),setTimeout(()=>Se(a,e,o),300)):Se(a,e,o)}}function Se(a,e,o){v.value={source:e,quiz:o},W.value=!1;const n=a.currentTarget;if(n){const r=n.getBoundingClientRect();h.value=r.right-150,se.value=r.bottom+window.pageYOffset+5;const i=window.innerWidth,K=window.innerHeight,B=150,D=150;h.value+B>i&&(h.value=i-B-10),r.bottom+D>K&&(se.value=r.top+window.pageYOffset-D-5)}P.value=!0,setTimeout(()=>{document.addEventListener("click",F),document.addEventListener("contextmenu",F)},0)}function F(){!P.value||W.value||(W.value=!0,setTimeout(()=>{P.value=!1,W.value=!1},200))}function lt(){v.value&&(O.value=v.value.quiz.name||"",Z.value=!0,F())}function st(){v.value&&(Fe.value=v.value.quiz.name||"",Be.value=v.value.source,ae.value=!0,F())}async function nt(){if(console.log("Attempting to confirm delete..."),!v.value){console.log("Confirm delete aborted: No quiz selected.");return}fe.value=!0,console.log(`Deleting quiz: ${v.value.quiz.name} (Source: ${v.value.source})`);try{v.value.source==="local"||v.value.source===p.ONLINE_IMPORT||v.value.source===p.REMOTE_IMPORT?rt():v.value.source==="remote"&&await it(),ae.value=!1,console.log("Delete confirmation modal closed.")}catch(a){console.error("åˆ é™¤é¢˜åº“å¤±è´¥:",a),je.value=`åˆ é™¤é¢˜åº“å¤±è´¥: ${a.message}`,ge.value=!0}finally{fe.value=!1,console.log("Delete operation finished.")}}function rt(){if(!v.value)return;const e=v.value.quiz.name,o=v.value.source;console.log(`å°è¯•åˆ é™¤æœ¬åœ°é¢˜åº“: ${e} (æ¥æº: ${o})`);const n=w.value.findIndex(r=>r.name===e&&r.source===o);console.log(`æ‰¾åˆ°è¦åˆ é™¤çš„ç´¢å¼•: ${n}`),n>-1?(w.value.splice(n,1),console.log("å·²ä»Žé¢˜åº“åˆ—è¡¨ä¸­ç§»é™¤"),s.saveQuizList(w.value),s.removeQuizFromStorage(e),console.log(`å·²ä¿å­˜é¢˜åº“åˆ—è¡¨å¹¶ç§»é™¤ç¼“å­˜: ${e}`),g.value&&g.value.source===o&&g.value.name===e&&(s.clearCurrentQuiz(),c.value=null,g.value={name:"",source:""},l.value=null,U.value=null,console.log("å·²æ¸…ç©ºå½“å‰é¢˜åº“æ•°æ®ï¼Œå› ä¸ºå®ƒæ˜¯æ­£åœ¨è¢«åˆ é™¤çš„é¢˜åº“")),d("é¢˜åº“åˆ é™¤æˆåŠŸ","success"),v.value=null,J(),console.log("å·²æ‰‹åŠ¨åˆ·æ–°é¢˜åº“åˆ—è¡¨ä»¥ç¡®ä¿UIæ›´æ–°")):(console.warn(`å°è¯•åˆ é™¤æœ¬åœ°é¢˜åº“å¤±è´¥ï¼šåœ¨åˆ—è¡¨ä¸­æœªæ‰¾åˆ° ${e} (æ¥æº: ${o})`),s.removeQuizFromStorage(e),console.log(`å°è¯•ä»Žå­˜å‚¨ä¸­ç§»é™¤: ${e}`),d("åˆ é™¤å¤±è´¥ï¼šæ— æ³•åœ¨åˆ—è¡¨ä¸­æ‰¾åˆ°é¢˜åº“","error"))}async function it(){if(!v.value)return;const a=s.getGithubConfig(),e=a.owner,o=a.repo,n=a.branch||"main",r=a.token;if(!e||!o||!r)throw new Error("GitHubé…ç½®ä¸å®Œæ•´ï¼Œæ— æ³•åˆ é™¤è¿œç¨‹æ–‡ä»¶");const i=v.value.quiz,K=i.path;if(!K)throw new Error("æ— æ•ˆçš„æ–‡ä»¶è·¯å¾„");const B=`https://api.github.com/repos/${e}/${o}/contents/${K}?ref=${n}`,D={Authorization:`token ${r}`,Accept:"application/vnd.github.v3+json"},G=await fetch(B,{headers:D});if(!G.ok){const oe=await G.json();throw new Error(`èŽ·å–æ–‡ä»¶ä¿¡æ¯å¤±è´¥ (${G.status}): ${oe.message||"æœªçŸ¥é”™è¯¯"}`)}const _e=(await G.json()).sha,Et=`https://api.github.com/repos/${e}/${o}/contents/${K}`,ke=await fetch(Et,{method:"DELETE",headers:D,body:JSON.stringify({message:`åˆ é™¤é¢˜åº“: ${i.name}`,sha:_e,branch:n})});if(!ke.ok){let oe=`åˆ é™¤å¤±è´¥ (${ke.status})`;try{const Qt=await ke.json();oe+=`: ${Qt.message||"æœªçŸ¥é”™è¯¯"}`}catch{}throw new Error(oe)}const Ge=$.value.findIndex(oe=>oe.path===i.path);Ge>-1&&($.value.splice(Ge,1),g.value&&g.value.source==="remote"&&g.value.name===i.name&&(s.clearCurrentQuiz(),c.value=null,g.value={name:"",source:""}),d("é¢˜åº“å·²æˆåŠŸä»ŽGitHubä»“åº“åˆ é™¤","success"))}function ut(a){J()}function dt(a){var r;const e=a.target,o=(r=e==null?void 0:e.files)==null?void 0:r[0];if(!o)return;M.value=!0,d("æ­£åœ¨è§£æžé¢˜åº“æ–‡ä»¶...","info");const n=new FileReader;n.onload=function(i){var K;try{const B=(K=i.target)==null?void 0:K.result,D=We(B,o.name);if(s.enhancedValidQuizData(D)){c.value=D,s.setQuizData(D),g.value={source:"file",name:o.name.replace(/\.(json|txt)$/,"")},s.saveLastLoadedQuiz(o.name.replace(/\.(json|txt)$/,""),"file"),k.value="all",y.value=H.NORMAL,C.value=1,_.value=we(),Me();const G={id:`file-${o.name}`,name:o.name.replace(/\.(json|txt)$/,""),path:"localStorage",source:p.LOCAL,lastModified:Date.now(),data:D,info:"ä»Žæ–‡ä»¶å¯¼å…¥"},ze=w.value.findIndex(_e=>_e.name===G.name&&_e.source===p.LOCAL);ze>=0?w.value[ze]=G:w.value.push(G),s.saveQuizList(w.value),s.saveQuizToStorage(G.name,D),d(`æˆåŠŸåŠ è½½é¢˜åº“ï¼š${o.name}`,"success")}else throw new Error("é¢˜åº“æ ¼å¼æ— æ•ˆ")}catch(B){console.error("è§£æžé¢˜åº“æ–‡ä»¶å¤±è´¥:",B),d(`è§£æžé¢˜åº“æ–‡ä»¶å¤±è´¥: ${B.message}`,"error")}finally{M.value=!1,e&&(e.value="")}},n.onerror=function(){d("è¯»å–æ–‡ä»¶å¤±è´¥","error"),M.value=!1},n.readAsText(o)}const xe=xt(s.getSettings()),ct=a=>{s.updateSettings(a),Object.assign(xe,s.getSettings()),te.value=a.uiSettings.darkMode},vt=()=>{N.push("/")},pt=V(()=>c.value!==null),X=u(R.CACHE),pe=u(""),Oe=V(()=>{var o;const a=Ne();let e=a;if(X.value&&(e=a.filter(n=>Ct(n.source)===X.value)),(o=pe.value)!=null&&o.trim()){const n=pe.value.toLowerCase();e=e.filter(r=>r.name.toLowerCase().includes(n)||r.info&&r.info.toLowerCase().includes(n))}return e});function Ne(){return[...w.value.map(a=>({id:`${a.source||"local"}-${a.name}`,source:a.source,name:a.name,info:a.info||me(a.source),path:a.path,title:a.title||a.name,lastModified:a.lastModified,download_url:void 0})),...I.value.map(a=>({id:`online-${a.path}`,source:p.ONLINE,name:a.name,info:a.info||"åœ¨çº¿é¢˜åº“",path:a.path,download_url:a.download_url,title:a.name,lastModified:0})),...$.value.map(a=>({id:`remote-${a.path}`,source:p.REMOTE,name:a.name,info:a.info||"è¿œç¨‹é¢˜åº“",path:a.path,download_url:a.download_url,title:a.name,lastModified:Date.now()}))]}function me(a){switch(a){case p.LOCAL:return"ä»Žæ–‡ä»¶å¯¼å…¥";case p.ONLINE_IMPORT:return"ä»Žåœ¨çº¿å¯¼å…¥";case p.REMOTE_IMPORT:return"ä»Žè¿œç¨‹å¯¼å…¥";case p.ONLINE:return"åœ¨çº¿é¢˜åº“";case p.REMOTE:return"è¿œç¨‹é¢˜åº“";default:return"æœªçŸ¥æ¥æº"}}function mt(a){b.value||l.value&&l.value.id===a.id||(l.value=a,b.value=a,d(`æ­£åœ¨åŠ è½½é¢˜åº“: ${a.name}`,"info"),gt().then(()=>{U.value=l.value,d(`å·²åŠ è½½é¢˜åº“: ${a.name}`,"success")}).catch(e=>{d(`åŠ è½½é¢˜åº“å¤±è´¥: ${e.message}`,"error")}).finally(()=>{b.value=null}))}async function gt(){if(!l.value)return;const a=l.value;try{const e=a.source;let o=null;if(e===p.ONLINE||e===p.REMOTE?(o=await ft(a),o&&bt(a,o)):o=_t(a),o)yt(a,o);else throw new Error(`æ— æ³•åŠ è½½é¢˜åº“: ${a.name}`)}catch(e){throw e}}async function ft(a){let e=a.download_url;if(a.source===p.ONLINE&&!e){let i=a.path||`${a.name}.json`;i.startsWith("./")&&(i=i.substring(2)),!i.startsWith("/")&&!i.startsWith("http")&&(i=`/${i}`),e=i}if(!e)throw new Error(`ç¼ºå°‘ä¸‹è½½é“¾æŽ¥: ${a.name}`);const o=`?t=${Date.now()}`,n=e.includes("?")?`${e}&t=${Date.now()}`:`${e}${o}`,r=await fetch(n);if(!r.ok)throw new Error(`èŽ·å–é¢˜åº“æ•°æ®å¤±è´¥ (${r.status}): ${r.statusText}`);try{const i=await r.json();if(!s.enhancedValidQuizData(i))throw new Error(`æ— æ•ˆçš„é¢˜åº“æ•°æ®æ ¼å¼: ${a.name}`);return i}catch(i){throw console.error(`é¢˜åº“æ•°æ®æ ¼å¼é”™è¯¯: ${a.name}`,i),new Error(`é¢˜åº“æ•°æ®æ ¼å¼é”™è¯¯: ${a.name}`)}}function _t(a){const e=s.loadQuizFromStorage(a.name);if(e)return e;if(a.source===p.LOCAL)throw new Error(`æ‰¾ä¸åˆ°é¢˜åº“ç¼“å­˜: ${a.name}`);return null}function bt(a,e){s.saveQuizToStorage(a.name,e);const o=a.source===p.ONLINE?p.ONLINE_IMPORT:p.REMOTE_IMPORT,n=w.value.findIndex(i=>i.name===a.name&&i.source===o),r={id:`${o}-${Date.now()}`,name:a.name,path:"localStorage",source:o,info:a.info||me(o),title:a.name,lastModified:Date.now()};n>=0?w.value[n]=r:w.value.push(r),s.saveQuizList(w.value),l.value={...a,source:o}}function yt(a,e){c.value=e,s.setQuizData(e),l.value&&(l.value={...l.value,data:e}),g.value={source:l.value.source,name:a.name},s.saveLastLoadedQuiz(a.name,l.value.source),k.value="all",y.value=H.NORMAL,C.value=1,_.value=we(),s.setQuizConfig({chapterIndex:k.value,mode:y.value,rangeStart:C.value,rangeEnd:_.value,randomize:!1,wrongOnly:!1}),Me()}function ht(){try{ce.value=s.getQuizAnsweredCount(),ve.value=s.getQuizCorrectCount(),Ke.value={totalAnswered:ce.value,correctCount:ve.value,wrongCount:s.getQuizAnsweredCount()-s.getQuizCorrectCount(),dailyActivity:[]}}catch{d("åŠ è½½ç»Ÿè®¡æ•°æ®å¤±è´¥","error")}}function we(){if(!c.value||!c.value.chapters)return 100;let a=0;return c.value.chapters.forEach(e=>{e.questions&&e.questions.length>0&&(a+=e.questions.length)}),a>0?a:100}function $e(a){X.value=a}function Ie(a){return{[p.LOCAL]:"source-badge local",[p.ONLINE]:"source-badge online",[p.REMOTE]:"source-badge remote",[p.ONLINE_IMPORT]:"source-badge online-import",[p.REMOTE_IMPORT]:"source-badge remote-import"}[a.source]||"source-badge unknown"}function Te(a){return me(a.source)}function De(a){return a?a.info?a.info:me(a.source):"æš‚æ— æè¿°"}function wt(){ee.value=!0}function $t(){s.setQuizConfig({mode:y.value,rangeStart:C.value,rangeEnd:_.value,randomize:y.value==="random",chapterIndex:k.value,wrongOnly:y.value==="wrong"}),s.saveQuizState(),ee.value=!1,d("åˆ·é¢˜æ¨¡å¼å·²è®¾ç½®","success")}const Re=V(()=>{const a=s.getGithubConfig();return!!(a.owner&&a.repo&&a.token)});async function Ae(a){if(!v.value)return;F();const o=v.value.quiz.name,n=a==="fetch"?"ä»Žè¿œç¨‹åŒæ­¥":"æŽ¨é€åˆ°è¿œç¨‹";d(`æ­£åœ¨${n}é¢˜åº“...`,"info"),M.value=!0;try{let r=!1;if(a==="fetch"){const i=await s.syncQuizFromGithub(o);r=!!i,r&&i&&(g.value&&g.value.name===o&&(c.value=i,l.value&&(l.value.data=i)),await J())}else r=await s.pushQuizToGithub(o);r&&await J()}catch(r){d(`${n}å¤±è´¥: ${r.message}`,"error")}finally{M.value=!1}}const je=u(""),ge=u(!1);function Ce(){ge.value=!1}function Ct(a){switch(a){case p.LOCAL:case p.ONLINE_IMPORT:case p.REMOTE_IMPORT:return R.CACHE;case p.ONLINE:return R.ONLINE;case p.REMOTE:return R.REMOTE;default:return R.CACHE}}function Ue(){if(!v.value||!O.value.trim()){d("è¯·è¾“å…¥æœ‰æ•ˆçš„é¢˜åº“åç§°","error");return}try{if(v.value.source==="local"){const a=w.value.find(e=>{var o;return e.path===((o=v.value)==null?void 0:o.quiz.path)});if(a){const e=a.name;a.name=O.value,s.saveQuizList(w.value);const o=s.loadQuizFromStorage(e);o&&(s.saveQuizToStorage(O.value,o),s.removeQuizFromStorage(e)),g.value&&g.value.source==="local"&&g.value.name===v.value.quiz.name&&(o&&(o.title=O.value,s.setQuizData(o)),g.value.name=O.value,s.saveLastLoadedQuiz(O.value,g.value.source)),d("é¢˜åº“é‡å‘½åæˆåŠŸ","success")}}else if(v.value.source==="remote"){const a=$.value.find(e=>{var o;return e.path===((o=v.value)==null?void 0:o.quiz.path)});a&&(a.name=O.value,c.value&&g.value&&g.value.source==="remote"&&g.value.name===v.value.quiz.name&&(c.value.title=O.value,g.value.name=O.value,s.setQuizData(c.value),s.saveLastLoadedQuiz(O.value,g.value.source)),d("é¢˜åº“é‡å‘½åæˆåŠŸï¼ˆä»…æœ¬åœ°æ˜¾ç¤ºåç§°å˜æ›´ï¼‰","success"))}}catch(a){d(`é‡å‘½åé¢˜åº“å¤±è´¥: ${a.message}`,"error")}finally{Z.value=!1}}const zt=()=>{s.toggleDarkMode(),te.value=s.getUiSettings().darkMode;const a=document.querySelector(".page-library__theme-toggle");a&&a.classList.toggle("dark",te.value)},ae=u(!1),Fe=u(""),Be=u(""),fe=u(!1);function kt(){if(!l.value){d("è¯·å…ˆé€‰æ‹©ä¸€ä¸ªé¢˜åº“","warning");return}de.value=!0}return(a,e)=>(m(),f("div",va,[t("div",pa,[t("div",ma,[t("button",{class:"page-library__action-button page-library__action-button--secondary",title:"è¿”å›žä¸»é¡µ",onClick:vt},[z(E,{name:"home"})]),e[39]||(e[39]=t("div",{class:"page-library__title"}," Elyxira ",-1)),t("div",ga,[t("div",{class:L(["page-library__theme-toggle",{dark:te.value}]),onClick:zt},e[38]||(e[38]=[t("i",{class:"sun-icon fas fa-sun"},null,-1),t("i",{class:"moon-icon fas fa-moon"},null,-1)]),2),z(jt,{class:"page-library__action-button page-library__action-button--secondary",onOpenGeneralSettings:e[0]||(e[0]=o=>q.value=!0),onOpenRepoSettings:e[1]||(e[1]=o=>de.value=!0),onOpenDebug:e[2]||(e[2]=o=>ne.value=!0)})])]),t("div",fa,[t("div",_a,[e[40]||(e[40]=t("div",{class:"page-library__card-title"},"é¢˜åº“åˆ—è¡¨",-1)),t("div",ba,[t("input",{type:"file",id:"quizFileInput",accept:".json,.txt",class:"file-input",onChange:dt,style:{display:"none"}},null,32),t("button",{class:"page-library__action-button page-library__action-button--primary",onClick:e[3]||(e[3]=o=>re.value=!0)},[z(E,{name:"upload",size:"16"})]),t("button",{class:"page-library__action-button page-library__action-button--secondary",onClick:kt,title:"åŒæ­¥ä»“åº“"},[z(E,{name:"github",size:"16"})]),t("button",{class:"page-library__action-button page-library__action-button--secondary",onClick:J,title:"åˆ·æ–°åˆ—è¡¨"},[z(E,{name:"refresh",size:"16"})])])]),t("div",ya,[t("div",ha,[t("button",{class:L(["page-library__filter-button",{"page-library__filter-button--active":X.value===x(R).CACHE||!X.value}]),onClick:e[4]||(e[4]=o=>$e(x(R).CACHE))}," ç¼“å­˜ ",2),t("button",{class:L(["page-library__filter-button",{"page-library__filter-button--active":X.value===x(R).ONLINE}]),onClick:e[5]||(e[5]=o=>$e(x(R).ONLINE))}," åœ¨çº¿ ",2),t("button",{class:L(["page-library__filter-button",{"page-library__filter-button--active":X.value===x(R).REMOTE}]),onClick:e[6]||(e[6]=o=>$e(x(R).REMOTE))}," è¿œç¨‹ ",2)]),t("div",wa,[Y(t("input",{type:"text","onUpdate:modelValue":e[7]||(e[7]=o=>pe.value=o),placeholder:"æœç´¢é¢˜åº“...",class:"page-library__search-input"},null,512),[[ie,pe.value]]),z(E,{name:"search",size:"14",class:"page-library__search-icon"})])]),t("div",$a,[t("table",Ca,[e[45]||(e[45]=t("thead",null,[t("tr",null,[t("th",null,"é¢˜åº“åç§°"),t("th",null,"æ¥æº"),t("th",null,"æè¿°"),t("th",null,"æœ€åŽä¿®æ”¹"),t("th",null,"æ“ä½œ")])],-1)),t("tbody",null,[T.value?(m(),f("tr",za,[t("td",ka,[t("div",Ea,[t("div",Qa,[z(E,{name:"refresh",size:"24"})]),e[41]||(e[41]=t("div",{class:"page-library__loading-text"},"æ­£åœ¨åˆ·æ–°é¢˜åº“åˆ—è¡¨...",-1))])])])):S("",!0),T.value?S("",!0):(m(),f(be,{key:1},[(m(!0),f(be,null,Qe(Oe.value,o=>(m(),f("tr",{key:o.id,class:L({"page-library__table-row":!0,loading:b.value&&b.value.id===o.id})},[t("td",La,Q(o.name),1),t("td",null,[t("span",{class:L(["source-badge",Ie(o)])},Q(Te(o)),3)]),t("td",Ma,Q(De(o)),1),t("td",null,Q(o.lastModified?new Date(o.lastModified).toLocaleDateString():"æœªçŸ¥"),1),t("td",Sa,[t("button",{class:"page-library__table-button",onClick:n=>mt(o)},"é€‰æ‹©",8,xa),o.source!==x(p).ONLINE?(m(),f("button",{key:0,class:"page-library__table-more",onClick:n=>ot(n,o.source,o)},[z(E,{name:"more",size:"16"})],8,Oa)):S("",!0)])],2))),128)),Oe.value.length===0?(m(),f("tr",Na,[t("td",Ia,[t("div",Ta,[e[42]||(e[42]=t("div",{class:"page-library__empty-icon"},"ðŸ“­",-1)),e[43]||(e[43]=t("h3",{class:"page-library__empty-title"},"æ²¡æœ‰æ‰¾åˆ°é¢˜åº“",-1)),e[44]||(e[44]=t("p",{class:"page-library__empty-subtitle"},"è¯·å¯¼å…¥é¢˜åº“æˆ–æ›´æ”¹ç­›é€‰æ¡ä»¶",-1)),t("button",{class:"page-library__empty-action",onClick:e[8]||(e[8]=o=>re.value=!0)},"å¯¼å…¥é¢˜åº“")])])])):S("",!0)],64))])])])]),P.value?(m(),f("div",{key:0,class:L(["context-menu",{closing:W.value}]),style:Ve({top:se.value+"px",left:h.value+"px"})},[v.value&&v.value.source!==x(p).ONLINE?(m(),f("div",{key:0,class:"menu-item",onClick:lt},[z(E,{name:"rename",size:"16"}),e[46]||(e[46]=A(" é‡å‘½å "))])):S("",!0),v.value&&v.value.source!==x(p).ONLINE?(m(),f("div",{key:1,class:"menu-item delete",onClick:st},[z(E,{name:"delete",size:"16"}),e[47]||(e[47]=A(" åˆ é™¤ "))])):S("",!0),v.value&&v.value.source===x(p).LOCAL&&Re.value?(m(),f("div",{key:2,class:"menu-item",onClick:e[9]||(e[9]=o=>Ae("fetch"))},[z(E,{name:"refresh",size:"16"}),e[48]||(e[48]=A(" ä»Žè¿œç¨‹åŒæ­¥ "))])):S("",!0),v.value&&v.value.source===x(p).LOCAL&&Re.value?(m(),f("div",{key:3,class:"menu-item",onClick:e[10]||(e[10]=o=>Ae("push"))},[z(E,{name:"upload",size:"16"}),e[49]||(e[49]=A(" æŽ¨é€åˆ°è¿œç¨‹ "))])):S("",!0)],6)):S("",!0),t("div",{class:L(["modal-overlay",{active:Z.value}]),onClick:e[14]||(e[14]=le(o=>Z.value=!1,["self"]))},[t("div",Da,[t("div",Ra,[e[50]||(e[50]=t("h2",{class:"page-library__modal-title"},"é‡å‘½åé¢˜åº“",-1)),t("button",{class:"page-library__modal-close",onClick:e[11]||(e[11]=o=>Z.value=!1)},"Ã—")]),t("div",Aa,[t("div",ja,[e[51]||(e[51]=t("label",{for:"newQuizName"},"é¢˜åº“åç§°",-1)),e[52]||(e[52]=t("div",{class:"form-description"},"è¾“å…¥æ–°çš„é¢˜åº“åç§°",-1)),Y(t("input",{type:"text",id:"newQuizName","onUpdate:modelValue":e[12]||(e[12]=o=>O.value=o),class:"page-library__search-input",placeholder:"è¯·è¾“å…¥æ–°åç§°",onKeyup:Ot(Ue,["enter"])},null,544),[[ie,O.value]])])]),t("div",Ua,[t("button",{class:"page-library__filter-button",onClick:e[13]||(e[13]=o=>Z.value=!1)},"å–æ¶ˆ"),t("button",{class:"page-library__card-action",onClick:Ue},"ç¡®è®¤")])])],2),t("div",Fa,[e[70]||(e[70]=t("div",{class:"page-library__card-header"},[t("div",{class:"page-library__card-title"},"åˆ·é¢˜è®¾ç½®")],-1)),t("div",Ba,[l.value?(m(),f("div",Ga,[t("div",Ha,[t("h3",Va,Q(l.value.name),1),t("div",{class:L(["source-badge",Ie(l.value)])},Q(Te(l.value)),3)]),t("p",Pa,Q(De(l.value)),1)])):(m(),f("div",Wa,e[53]||(e[53]=[t("p",null,"è¯·ä»Žä¸Šæ–¹åˆ—è¡¨é€‰æ‹©ä¸€ä¸ªé¢˜åº“",-1)]))),t("div",Ja,[t("div",Ka,[e[56]||(e[56]=t("div",{class:"page-library__filter-label"},"ç« èŠ‚ï¼š",-1)),Y(t("select",{"onUpdate:modelValue":e[15]||(e[15]=o=>k.value=o),class:"page-library__filter-select",disabled:T.value},[e[54]||(e[54]=t("option",{value:"all"},"å…¨éƒ¨ç« èŠ‚",-1)),(m(!0),f(be,null,Qe(Le.value,(o,n)=>(m(),f("option",{key:n,value:o},Q(o),9,qa))),128))],8,Ya),[[Nt,k.value]]),t("button",{class:"page-library__filter-button",onClick:wt,disabled:T.value},[z(E,{name:"stats",size:"16"}),e[55]||(e[55]=t("span",null,"åˆ·é¢˜æ¨¡å¼",-1))],8,Xa)]),t("button",{class:"page-library__card-action page-library__start-button",onClick:at,disabled:!pt.value||T.value},[z(E,{name:"start",size:"16"}),e[57]||(e[57]=t("span",null,"å¼€å§‹åˆ·é¢˜",-1))],8,Za)])]),t("div",eo,[e[69]||(e[69]=t("h4",{class:"page-library__section-title"},"é¢˜åº“ç»Ÿè®¡",-1)),t("div",{class:L(["page-library__stats-grid",{loading:T.value}])},[T.value?(m(),f("div",to,[t("div",ao,[z(E,{name:"refresh",size:"24"})]),e[58]||(e[58]=t("div",{class:"page-library__loading-text"},"æ­£åœ¨åŠ è½½ç»Ÿè®¡æ•°æ®...",-1))])):S("",!0),t("div",oo,[e[60]||(e[60]=t("div",{class:"page-library__stat-icon"},[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),t("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})])],-1)),t("div",lo,[e[59]||(e[59]=t("div",{class:"page-library__stat-title"},"ç« èŠ‚æ•°",-1)),t("div",so,Q(Le.value.length||0),1)])]),t("div",no,[e[62]||(e[62]=t("div",{class:"page-library__stat-icon"},[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),t("rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"})])],-1)),t("div",ro,[e[61]||(e[61]=t("div",{class:"page-library__stat-title"},"é¢˜ç›®æ•°",-1)),t("div",io,Q(Je.value||0),1)])]),t("div",uo,[e[64]||(e[64]=t("div",{class:"page-library__stat-icon"},[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("circle",{cx:"12",cy:"12",r:"10"}),t("path",{d:"M12 6v6l4 2"})])],-1)),t("div",co,[e[63]||(e[63]=t("div",{class:"page-library__stat-title"},"å·²ç­”é¢˜æ•°",-1)),t("div",vo,Q(ce.value||0),1)])]),t("div",po,[e[66]||(e[66]=t("div",{class:"page-library__stat-icon"},[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),t("polyline",{points:"22 4 12 14.01 9 11.01"})])],-1)),t("div",mo,[e[65]||(e[65]=t("div",{class:"page-library__stat-title"},"æ­£ç¡®é¢˜æ•°",-1)),t("div",go,Q(ve.value||0),1)])]),t("div",fo,[e[68]||(e[68]=t("div",{class:"page-library__stat-icon"},[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"})])],-1)),t("div",_o,[e[67]||(e[67]=t("div",{class:"page-library__stat-title"},"æ­£ç¡®çŽ‡",-1)),t("div",bo,Q(Ye.value),1)])])],2)])]),t("div",{class:L(["modal-overlay",{active:ee.value}]),onClick:e[25]||(e[25]=le(o=>ee.value=!1,["self"]))},[t("div",yo,[t("div",ho,[e[71]||(e[71]=t("h2",{class:"page-library__modal-title"},"é€‰æ‹©åˆ·é¢˜æ¨¡å¼",-1)),t("button",{class:"page-library__modal-close",onClick:e[16]||(e[16]=o=>ee.value=!1)},"Ã—")]),t("div",wo,[t("div",$o,[t("div",{class:L(["mode-option",{active:y.value===x(H).NORMAL}]),onClick:e[18]||(e[18]=o=>y.value=x(H).NORMAL)},[Y(t("input",{type:"radio",name:"quizMode",value:"normal","onUpdate:modelValue":e[17]||(e[17]=o=>y.value=o)},null,512),[[He,y.value]]),e[72]||(e[72]=t("span",{class:"mode-label"},"æ™®é€šæ¨¡å¼",-1)),e[73]||(e[73]=t("span",{class:"mode-desc"},"æŒ‰ç…§é¢˜åº“é¡ºåºè¿›è¡Œåˆ·é¢˜",-1))],2),t("div",{class:L(["mode-option",{active:y.value===x(H).RANGE}]),onClick:e[23]||(e[23]=o=>y.value=x(H).RANGE)},[Y(t("input",{type:"radio",name:"quizMode",value:"range","onUpdate:modelValue":e[19]||(e[19]=o=>y.value=o)},null,512),[[He,y.value]]),e[75]||(e[75]=t("span",{class:"mode-label"},"èŒƒå›´æ¨¡å¼",-1)),e[76]||(e[76]=t("span",{class:"mode-desc"},"é€‰æ‹©ç‰¹å®šé¢˜å·èŒƒå›´è¿›è¡Œåˆ·é¢˜",-1)),y.value===x(H).RANGE?(m(),f("div",{key:0,class:"range-inputs",onClick:e[22]||(e[22]=le(()=>{},["stop"]))},[Y(t("input",{type:"number",placeholder:"èµ·å§‹é¢˜å·",min:"1","onUpdate:modelValue":e[20]||(e[20]=o=>C.value=o),class:"page-library__search-input"},null,512),[[ie,C.value]]),e[74]||(e[74]=t("span",{class:"range-separator"},"è‡³",-1)),Y(t("input",{type:"number",placeholder:"ç»“æŸé¢˜å·",min:"1","onUpdate:modelValue":e[21]||(e[21]=o=>_.value=o),class:"page-library__search-input"},null,512),[[ie,_.value]])])):S("",!0)],2)])]),t("div",Co,[t("button",{class:"page-library__filter-button",onClick:e[24]||(e[24]=o=>ee.value=!1)},"å–æ¶ˆ"),t("button",{class:"page-library__card-action",onClick:$t},"ç¡®è®¤")])])],2),re.value?(m(),ye(ca,{key:1,"quiz-data":c.value||void 0,show:re.value,onClose:e[26]||(e[26]=o=>re.value=!1),onImportComplete:J},null,8,["quiz-data","show"])):S("",!0),z(Tt,{show:de.value,onClose:e[27]||(e[27]=o=>de.value=!1),onSyncComplete:J,onSave:ut},null,8,["show"]),z(Dt,{show:q.value,"current-settings":xe,onClose:e[28]||(e[28]=o=>q.value=!1),onSave:ct},null,8,["show","current-settings"]),t("div",{class:L(["modal-overlay",{active:ne.value}]),onClick:e[30]||(e[30]=le(o=>ne.value=!1,["self"]))},[ne.value?(m(),ye(Jt,{key:0,onClose:e[29]||(e[29]=o=>ne.value=!1)})):S("",!0)],2),t("div",{class:L(["modal-overlay",{active:ge.value}]),onClick:e[33]||(e[33]=le(o=>Ce(),["self"]))},[ge.value?(m(),f("div",zo,[t("div",ko,[e[77]||(e[77]=t("h3",{class:"page-library__modal-title"},"é”™è¯¯è¯¦æƒ…",-1)),t("button",{class:"page-library__modal-close",onClick:e[31]||(e[31]=o=>Ce())},"Ã—")]),t("div",Eo,[t("div",Qo,[t("pre",null,Q(je.value),1)])]),t("div",Lo,[t("button",{class:"page-library__card-action",onClick:e[32]||(e[32]=o=>Ce())},"å…³é—­")])])):S("",!0)],2),t("div",{class:L(["modal-overlay",{active:ae.value}]),onClick:e[37]||(e[37]=le(o=>ae.value=!1,["self"]))},[t("div",Mo,[t("div",So,[e[78]||(e[78]=t("h3",{class:"page-library__modal-title"},"ç¡®è®¤åˆ é™¤",-1)),t("button",{class:"page-library__modal-close",onClick:e[34]||(e[34]=o=>ae.value=!1)},"Ã—")]),t("div",xo,[t("p",Oo,[z(E,{name:"warning",size:"24"}),e[79]||(e[79]=A(" ç¡®å®šè¦åˆ é™¤é¢˜åº“ ")),t("strong",null,Q(Fe.value),1),e[80]||(e[80]=A(" å—ï¼Ÿ "))]),Be.value==="remote"?(m(),f("p",No," æ­¤æ“ä½œå°†ä»ŽGitHubä»“åº“ä¸­æ°¸ä¹…åˆ é™¤è¯¥æ–‡ä»¶ï¼Œæ— æ³•æ¢å¤ï¼ ")):S("",!0)]),t("div",Io,[t("button",{class:"page-library__filter-button",onClick:e[35]||(e[35]=o=>ae.value=!1)},"å–æ¶ˆ"),t("button",{class:"page-library__card-action page-library__card-action--danger",onClick:e[36]||(e[36]=o=>nt()),disabled:fe.value},[fe.value?(m(),f("span",Do,[z(E,{name:"refresh",size:"16",class:"icon-spin"}),e[81]||(e[81]=A(" åˆ é™¤ä¸­... "))])):(m(),f("span",Ro,"ç¡®è®¤åˆ é™¤"))],8,To)])])],2)])]))}});export{Fo as default};
